{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\Projects\\\\react-ssr\\\\react-ssr\\\\Components\\\\CaseOpeningSec\\\\CaseOpeningSec.jsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { UnlockingContainerNotification } from \"../UnlockingContainerNotification/UnlockingContainerNotification\";\nimport ItemLine from \"../ItemLine/ItemLine\";\nimport { ItemChance, ItemStatrakChance } from \"../../helpers/chance\";\nimport { CaseOpeningConfirmation } from \"../CaseOpeningConfirmation/CaseOpeningConfirmation\";\nimport ReceivedItemModal from \"../ReceivedItemModal/ReceivedItemModal\";\nimport { useRouter } from \"next/router\";\nimport { getRandomInt } from \"../../helpers/random\";\nimport { containerType } from \"../../helpers/container-type\";\nimport { itemType } from \"../../helpers/item-type\";\nimport CaseOpeningAudio from \"../CaseOpeningAudio/CaseOpeningAudio\";\nimport { SettingsContext } from \"../../contexts/SettingsContext\";\nimport { act } from \"react-dom/test-utils\";\nexport const CaseOpeningSec = props => {\n  const context = useContext(SettingsContext);\n  const {\n    0: line,\n    1: setLine\n  } = useState(null);\n  const {\n    0: openingInProgress,\n    1: setOpeningInProgress\n  } = useState(false);\n  const {\n    0: receivedItemModalVisible,\n    1: setReceivedItemModalVisible\n  } = useState(false);\n  const {\n    0: receivedItem,\n    1: setReceivedItem\n  } = useState(null);\n  const router = useRouter(); // useEffect(() => {\n  //   setLine(generateLine());\n  // }, []);\n\n  const generateItem = () => {\n    let actItem;\n\n    switch (props.containerType) {\n      case containerType[0]:\n        actItem = selectRandomItem(getRandom());\n        break;\n\n      case containerType[1]:\n        actItem = selectRandomItem(getRandomSouvenir());\n        break;\n\n      default:\n        actItem = selectRandomItem(getRandom());\n        break;\n    }\n\n    setReceivedItem(actItem);\n    return actItem;\n  };\n\n  const addToLocalStorage = value => {\n    //console.log(Array.of(JSON.parse(localStorage.getItem(\"receivedItems\"))));\n    const curValue = localStorage.getItem(\"receivedItems\") != null ? Array.of(JSON.parse(localStorage.getItem(\"receivedItems\"))) : [];\n    console.log(curValue, [curValue, value]);\n    const valToStore = JSON.stringify([curValue, value]);\n    localStorage.setItem(\"receivedItems\", valToStore);\n  };\n\n  const generateLine = () => {\n    let elements = [];\n    let actItem = generateItem();\n    addToLocalStorage(actItem);\n\n    for (let index = 0; index < 30; index++) {\n      if (index === 25) {\n        elements.push(actItem);\n      } else {\n        let item;\n\n        switch (props.containerType) {\n          case containerType[0]:\n            item = selectRandomItem(getRandom());\n            break;\n\n          case containerType[1]:\n            item = selectRandomItem(getRandomSouvenir());\n            break;\n\n          default:\n            item = selectRandomItem(getRandom());\n            break;\n        }\n\n        elements.push(item);\n      }\n    }\n\n    return __jsx(ItemLine, {\n      items: elements,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 12\n      }\n    });\n  };\n\n  const getRandomSouvenir = () => {\n    const ran = Math.random();\n    if (props.items.some(e => e.type == itemType.GREY) && ran < ItemChance.GREY) return itemType.GREY;else if (props.items.some(e => e.type == itemType.LIGHTBLUE) && ran < ItemChance.LIGHTBLUE) return itemType.LIGHTBLUE;else if (props.items.some(e => e.type == itemType.BLUE) && ran < ItemChance.BLUE) return itemType.BLUE;else if (props.items.some(e => e.type == itemType.PURPLE) && ran < ItemChance.PURPLE) return itemType.PURPLE;else if (props.items.some(e => e.type == itemType.PINK) && ran < ItemChance.PINK) return itemType.PINK;else if (props.items.some(e => e.type == itemType.RED) && ran < ItemChance.RED) return itemType.RED;else if (props.items.some(e => e.type == itemType.GOLD) && ran < ItemChance.GOLD) return itemType.GOLD;\n  };\n\n  const getRandom = () => {\n    const ran = Math.random();\n    if (ran < ItemChance.BLUE) return itemType.BLUE;else if (ran < ItemChance.PURPLE) return itemType.PURPLE;else if (ran < ItemChance.PINK) return itemType.PINK;else if (ran < ItemChance.RED) return itemType.RED;else if (ran < ItemChance.GOLD) return itemType.GOLD;\n  };\n\n  const getRandomStatrak = type => {\n    const ran = Math.random();\n    if (ran < ItemStatrakChance.BLUE && type == itemType.BLUE) return true;else if (ran < ItemStatrakChance.PURPLE && type == itemType.PURPLE) return true;else if (ran < ItemStatrakChance.PINK && type == itemType.PINK) return true;else if (ran < ItemStatrakChance.RED && type == itemType.RED) return true;else if (ran < ItemStatrakChance.GOLD && type == itemType.GOLD) return true;\n  };\n\n  const selectRandomItem = type => {\n    let isStatrak;\n\n    if (!props.isSouvenier) {\n      isStatrak = getRandomStatrak(type);\n    } else {\n      isStatrak = false;\n    }\n\n    if (type === itemType.GOLD) {\n      const ran = getRandomInt(0, props.specialItems.length);\n      return _objectSpread({}, props.specialItems[ran], {\n        isStatrak\n      });\n    } else {\n      const allGroupItems = [...props.items.filter(val => val.type === type)];\n      const ran = getRandomInt(0, allGroupItems.length);\n      return _objectSpread({}, allGroupItems[ran], {\n        isStatrak\n      });\n    }\n  };\n\n  const openCase = () => {\n    setLine(generateLine());\n    setOpeningInProgress(true);\n    setTimeout(() => {\n      setReceivedItemModalVisible(true);\n    }, context.caseOpeningTime + 100);\n  };\n\n  const onReceivedItemConfirmation = () => {\n    router.push(\"/\");\n  };\n\n  const onTryAgainBtnClick = () => {\n    setReceivedItemModalVisible(false);\n    setOpeningInProgress(false);\n    setLine(generateLine());\n    setOpeningInProgress(true);\n    setTimeout(() => {\n      setReceivedItemModalVisible(true);\n    }, context.caseOpeningTime + 100);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-1263638782\" + \" \" + 'case-opening-sec',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }, openingInProgress && __jsx(CaseOpeningAudio, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 31\n    }\n  }), receivedItemModalVisible && __jsx(ReceivedItemModal, {\n    title: receivedItem.title,\n    isStatrak: receivedItem.isStatrak,\n    type: receivedItem.type,\n    image: receivedItem.image,\n    onTryAgainBtnClick: () => onTryAgainBtnClick(),\n    onSubmit: () => onReceivedItemConfirmation(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-1263638782\" + \" \" + 'head-wrap',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, !openingInProgress && __jsx(CaseOpeningConfirmation, {\n    image: props.caseImage,\n    title: props.caseTitle,\n    onSubmit: () => openCase(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }), openingInProgress && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-1263638782\" + \" \" + 'case-opener-bg',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, __jsx(\"hr\", {\n    className: \"jsx-1263638782\" + \" \" + 'middle-line',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-1263638782\" + \" \" + 'case-opener',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }\n  }, line)))), openingInProgress && __jsx(UnlockingContainerNotification, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 31\n    }\n  })), __jsx(_JSXStyle, {\n    id: \"1263638782\",\n    __self: this\n  }, \".case-opening-sec.jsx-1263638782{width:100%;height:50%;padding-top:2rem;background:#121b24;box-shadow:0px 0px 11px 1px rgba(0,0,0,0.75);}.case-opening-sec.jsx-1263638782 .head-wrap.jsx-1263638782{width:101%;-webkit-transform:translateX(-0.5%);-ms-transform:translateX(-0.5%);transform:translateX(-0.5%);background:#10161b;box-shadow:0px 0px 11px 1px rgba(0,0,0,0.75);height:54%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.case-opening-sec.jsx-1263638782 .head-wrap.jsx-1263638782 .case-opener-bg.jsx-1263638782{width:400px;background:black;position:relative;padding:16px 2px;}.case-opening-sec.jsx-1263638782 .head-wrap.jsx-1263638782 .case-opener-bg.jsx-1263638782 .case-opener.jsx-1263638782{width:100%;height:102px;overflow:hidden;position:relative;}.middle-line.jsx-1263638782{background:#605337;height:100%;position:absolute;left:50%;width:3px;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);top:0;margin:0;z-index:1;border:none;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xccmVhY3Qtc3NyXFxyZWFjdC1zc3JcXENvbXBvbmVudHNcXENhc2VPcGVuaW5nU2VjXFxDYXNlT3BlbmluZ1NlYy5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBc05TLEFBR3dCLEFBUUEsQUFXQyxBQU9ELEFBT1EsV0FoQ1IsQUFRaUIsQUFrQmYsQ0FQSSxPQWNMLEdBaENLLEVBMEJELEtBUEUsRUFjQSxRQWhDQyxDQTBCRCxPQVBELEVBY1IsU0FoQ3VDLEFBMEJsRCxBQU9ZLE1BZFosSUFlNkIsbUNBakM3QixJQUtxQixtQkFDNkIsbUNBNEIxQyxNQUNHLElBNUJFLEtBNkJELE1BNUJHLElBNkJELFlBQ2QsMERBN0JxQiw2RkFDSSxtR0FDekIiLCJmaWxlIjoiRDpcXFByb2plY3RzXFxyZWFjdC1zc3JcXHJlYWN0LXNzclxcQ29tcG9uZW50c1xcQ2FzZU9wZW5pbmdTZWNcXENhc2VPcGVuaW5nU2VjLmpzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IFVubG9ja2luZ0NvbnRhaW5lck5vdGlmaWNhdGlvbiB9IGZyb20gXCIuLi9VbmxvY2tpbmdDb250YWluZXJOb3RpZmljYXRpb24vVW5sb2NraW5nQ29udGFpbmVyTm90aWZpY2F0aW9uXCI7XHJcbmltcG9ydCBJdGVtTGluZSBmcm9tIFwiLi4vSXRlbUxpbmUvSXRlbUxpbmVcIjtcclxuaW1wb3J0IHsgSXRlbUNoYW5jZSwgSXRlbVN0YXRyYWtDaGFuY2UgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9jaGFuY2VcIjtcclxuaW1wb3J0IHsgQ2FzZU9wZW5pbmdDb25maXJtYXRpb24gfSBmcm9tIFwiLi4vQ2FzZU9wZW5pbmdDb25maXJtYXRpb24vQ2FzZU9wZW5pbmdDb25maXJtYXRpb25cIjtcclxuaW1wb3J0IFJlY2VpdmVkSXRlbU1vZGFsIGZyb20gXCIuLi9SZWNlaXZlZEl0ZW1Nb2RhbC9SZWNlaXZlZEl0ZW1Nb2RhbFwiO1xyXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcclxuaW1wb3J0IHsgZ2V0UmFuZG9tSW50IH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvcmFuZG9tXCI7XHJcbmltcG9ydCB7IGNvbnRhaW5lclR5cGUgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9jb250YWluZXItdHlwZVwiO1xyXG5pbXBvcnQgeyBpdGVtVHlwZSB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL2l0ZW0tdHlwZVwiO1xyXG5pbXBvcnQgQ2FzZU9wZW5pbmdBdWRpbyBmcm9tIFwiLi4vQ2FzZU9wZW5pbmdBdWRpby9DYXNlT3BlbmluZ0F1ZGlvXCI7XHJcbmltcG9ydCB7IFNldHRpbmdzQ29udGV4dCB9IGZyb20gXCIuLi8uLi9jb250ZXh0cy9TZXR0aW5nc0NvbnRleHRcIjtcclxuaW1wb3J0IHsgYWN0IH0gZnJvbSBcInJlYWN0LWRvbS90ZXN0LXV0aWxzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgQ2FzZU9wZW5pbmdTZWMgPSAocHJvcHMpID0+IHtcclxuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChTZXR0aW5nc0NvbnRleHQpO1xyXG4gIGNvbnN0IFtsaW5lLCBzZXRMaW5lXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtvcGVuaW5nSW5Qcm9ncmVzcywgc2V0T3BlbmluZ0luUHJvZ3Jlc3NdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtyZWNlaXZlZEl0ZW1Nb2RhbFZpc2libGUsIHNldFJlY2VpdmVkSXRlbU1vZGFsVmlzaWJsZV0gPSB1c2VTdGF0ZShcclxuICAgIGZhbHNlXHJcbiAgKTtcclxuICBjb25zdCBbcmVjZWl2ZWRJdGVtLCBzZXRSZWNlaXZlZEl0ZW1dID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcblxyXG4gIC8vIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgLy8gICBzZXRMaW5lKGdlbmVyYXRlTGluZSgpKTtcclxuICAvLyB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IGdlbmVyYXRlSXRlbSA9ICgpID0+IHtcclxuICAgIGxldCBhY3RJdGVtO1xyXG4gICAgc3dpdGNoIChwcm9wcy5jb250YWluZXJUeXBlKSB7XHJcbiAgICAgIGNhc2UgY29udGFpbmVyVHlwZVswXTpcclxuICAgICAgICBhY3RJdGVtID0gc2VsZWN0UmFuZG9tSXRlbShnZXRSYW5kb20oKSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgY29udGFpbmVyVHlwZVsxXTpcclxuICAgICAgICBhY3RJdGVtID0gc2VsZWN0UmFuZG9tSXRlbShnZXRSYW5kb21Tb3V2ZW5pcigpKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBhY3RJdGVtID0gc2VsZWN0UmFuZG9tSXRlbShnZXRSYW5kb20oKSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBzZXRSZWNlaXZlZEl0ZW0oYWN0SXRlbSk7XHJcbiAgICByZXR1cm4gYWN0SXRlbTtcclxuICB9O1xyXG5cclxuICBjb25zdCBhZGRUb0xvY2FsU3RvcmFnZSA9ICh2YWx1ZSkgPT4ge1xyXG4gICAgLy9jb25zb2xlLmxvZyhBcnJheS5vZihKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicmVjZWl2ZWRJdGVtc1wiKSkpKTtcclxuICAgIGNvbnN0IGN1clZhbHVlID1cclxuICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJyZWNlaXZlZEl0ZW1zXCIpICE9IG51bGxcclxuICAgICAgICA/IEFycmF5Lm9mKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJyZWNlaXZlZEl0ZW1zXCIpKSlcclxuICAgICAgICA6IFtdO1xyXG4gICAgY29uc29sZS5sb2coY3VyVmFsdWUsIFtjdXJWYWx1ZSwgdmFsdWVdKTtcclxuICAgIGNvbnN0IHZhbFRvU3RvcmUgPSBKU09OLnN0cmluZ2lmeShbY3VyVmFsdWUsIHZhbHVlXSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInJlY2VpdmVkSXRlbXNcIiwgdmFsVG9TdG9yZSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2VuZXJhdGVMaW5lID0gKCkgPT4ge1xyXG4gICAgbGV0IGVsZW1lbnRzID0gW107XHJcbiAgICBsZXQgYWN0SXRlbSA9IGdlbmVyYXRlSXRlbSgpO1xyXG4gICAgYWRkVG9Mb2NhbFN0b3JhZ2UoYWN0SXRlbSk7XHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgMzA7IGluZGV4KyspIHtcclxuICAgICAgaWYgKGluZGV4ID09PSAyNSkge1xyXG4gICAgICAgIGVsZW1lbnRzLnB1c2goYWN0SXRlbSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IGl0ZW07XHJcbiAgICAgICAgc3dpdGNoIChwcm9wcy5jb250YWluZXJUeXBlKSB7XHJcbiAgICAgICAgICBjYXNlIGNvbnRhaW5lclR5cGVbMF06XHJcbiAgICAgICAgICAgIGl0ZW0gPSBzZWxlY3RSYW5kb21JdGVtKGdldFJhbmRvbSgpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIGNvbnRhaW5lclR5cGVbMV06XHJcbiAgICAgICAgICAgIGl0ZW0gPSBzZWxlY3RSYW5kb21JdGVtKGdldFJhbmRvbVNvdXZlbmlyKCkpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGl0ZW0gPSBzZWxlY3RSYW5kb21JdGVtKGdldFJhbmRvbSgpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsZW1lbnRzLnB1c2goaXRlbSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiA8SXRlbUxpbmUgaXRlbXM9e2VsZW1lbnRzfSAvPjtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXRSYW5kb21Tb3V2ZW5pciA9ICgpID0+IHtcclxuICAgIGNvbnN0IHJhbiA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICBpZiAoXHJcbiAgICAgIHByb3BzLml0ZW1zLnNvbWUoKGUpID0+IGUudHlwZSA9PSBpdGVtVHlwZS5HUkVZKSAmJlxyXG4gICAgICByYW4gPCBJdGVtQ2hhbmNlLkdSRVlcclxuICAgIClcclxuICAgICAgcmV0dXJuIGl0ZW1UeXBlLkdSRVk7XHJcbiAgICBlbHNlIGlmIChcclxuICAgICAgcHJvcHMuaXRlbXMuc29tZSgoZSkgPT4gZS50eXBlID09IGl0ZW1UeXBlLkxJR0hUQkxVRSkgJiZcclxuICAgICAgcmFuIDwgSXRlbUNoYW5jZS5MSUdIVEJMVUVcclxuICAgIClcclxuICAgICAgcmV0dXJuIGl0ZW1UeXBlLkxJR0hUQkxVRTtcclxuICAgIGVsc2UgaWYgKFxyXG4gICAgICBwcm9wcy5pdGVtcy5zb21lKChlKSA9PiBlLnR5cGUgPT0gaXRlbVR5cGUuQkxVRSkgJiZcclxuICAgICAgcmFuIDwgSXRlbUNoYW5jZS5CTFVFXHJcbiAgICApXHJcbiAgICAgIHJldHVybiBpdGVtVHlwZS5CTFVFO1xyXG4gICAgZWxzZSBpZiAoXHJcbiAgICAgIHByb3BzLml0ZW1zLnNvbWUoKGUpID0+IGUudHlwZSA9PSBpdGVtVHlwZS5QVVJQTEUpICYmXHJcbiAgICAgIHJhbiA8IEl0ZW1DaGFuY2UuUFVSUExFXHJcbiAgICApXHJcbiAgICAgIHJldHVybiBpdGVtVHlwZS5QVVJQTEU7XHJcbiAgICBlbHNlIGlmIChcclxuICAgICAgcHJvcHMuaXRlbXMuc29tZSgoZSkgPT4gZS50eXBlID09IGl0ZW1UeXBlLlBJTkspICYmXHJcbiAgICAgIHJhbiA8IEl0ZW1DaGFuY2UuUElOS1xyXG4gICAgKVxyXG4gICAgICByZXR1cm4gaXRlbVR5cGUuUElOSztcclxuICAgIGVsc2UgaWYgKFxyXG4gICAgICBwcm9wcy5pdGVtcy5zb21lKChlKSA9PiBlLnR5cGUgPT0gaXRlbVR5cGUuUkVEKSAmJlxyXG4gICAgICByYW4gPCBJdGVtQ2hhbmNlLlJFRFxyXG4gICAgKVxyXG4gICAgICByZXR1cm4gaXRlbVR5cGUuUkVEO1xyXG4gICAgZWxzZSBpZiAoXHJcbiAgICAgIHByb3BzLml0ZW1zLnNvbWUoKGUpID0+IGUudHlwZSA9PSBpdGVtVHlwZS5HT0xEKSAmJlxyXG4gICAgICByYW4gPCBJdGVtQ2hhbmNlLkdPTERcclxuICAgIClcclxuICAgICAgcmV0dXJuIGl0ZW1UeXBlLkdPTEQ7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0UmFuZG9tID0gKCkgPT4ge1xyXG4gICAgY29uc3QgcmFuID0gTWF0aC5yYW5kb20oKTtcclxuICAgIGlmIChyYW4gPCBJdGVtQ2hhbmNlLkJMVUUpIHJldHVybiBpdGVtVHlwZS5CTFVFO1xyXG4gICAgZWxzZSBpZiAocmFuIDwgSXRlbUNoYW5jZS5QVVJQTEUpIHJldHVybiBpdGVtVHlwZS5QVVJQTEU7XHJcbiAgICBlbHNlIGlmIChyYW4gPCBJdGVtQ2hhbmNlLlBJTkspIHJldHVybiBpdGVtVHlwZS5QSU5LO1xyXG4gICAgZWxzZSBpZiAocmFuIDwgSXRlbUNoYW5jZS5SRUQpIHJldHVybiBpdGVtVHlwZS5SRUQ7XHJcbiAgICBlbHNlIGlmIChyYW4gPCBJdGVtQ2hhbmNlLkdPTEQpIHJldHVybiBpdGVtVHlwZS5HT0xEO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldFJhbmRvbVN0YXRyYWsgPSAodHlwZSkgPT4ge1xyXG4gICAgY29uc3QgcmFuID0gTWF0aC5yYW5kb20oKTtcclxuICAgIGlmIChyYW4gPCBJdGVtU3RhdHJha0NoYW5jZS5CTFVFICYmIHR5cGUgPT0gaXRlbVR5cGUuQkxVRSkgcmV0dXJuIHRydWU7XHJcbiAgICBlbHNlIGlmIChyYW4gPCBJdGVtU3RhdHJha0NoYW5jZS5QVVJQTEUgJiYgdHlwZSA9PSBpdGVtVHlwZS5QVVJQTEUpXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgZWxzZSBpZiAocmFuIDwgSXRlbVN0YXRyYWtDaGFuY2UuUElOSyAmJiB0eXBlID09IGl0ZW1UeXBlLlBJTkspIHJldHVybiB0cnVlO1xyXG4gICAgZWxzZSBpZiAocmFuIDwgSXRlbVN0YXRyYWtDaGFuY2UuUkVEICYmIHR5cGUgPT0gaXRlbVR5cGUuUkVEKSByZXR1cm4gdHJ1ZTtcclxuICAgIGVsc2UgaWYgKHJhbiA8IEl0ZW1TdGF0cmFrQ2hhbmNlLkdPTEQgJiYgdHlwZSA9PSBpdGVtVHlwZS5HT0xEKSByZXR1cm4gdHJ1ZTtcclxuICB9O1xyXG5cclxuICBjb25zdCBzZWxlY3RSYW5kb21JdGVtID0gKHR5cGUpID0+IHtcclxuICAgIGxldCBpc1N0YXRyYWs7XHJcbiAgICBpZiAoIXByb3BzLmlzU291dmVuaWVyKSB7XHJcbiAgICAgIGlzU3RhdHJhayA9IGdldFJhbmRvbVN0YXRyYWsodHlwZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpc1N0YXRyYWsgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlID09PSBpdGVtVHlwZS5HT0xEKSB7XHJcbiAgICAgIGNvbnN0IHJhbiA9IGdldFJhbmRvbUludCgwLCBwcm9wcy5zcGVjaWFsSXRlbXMubGVuZ3RoKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5wcm9wcy5zcGVjaWFsSXRlbXNbcmFuXSxcclxuICAgICAgICBpc1N0YXRyYWssXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBhbGxHcm91cEl0ZW1zID0gWy4uLnByb3BzLml0ZW1zLmZpbHRlcigodmFsKSA9PiB2YWwudHlwZSA9PT0gdHlwZSldO1xyXG4gICAgICBjb25zdCByYW4gPSBnZXRSYW5kb21JbnQoMCwgYWxsR3JvdXBJdGVtcy5sZW5ndGgpO1xyXG4gICAgICByZXR1cm4geyAuLi5hbGxHcm91cEl0ZW1zW3Jhbl0sIGlzU3RhdHJhayB9O1xyXG4gICAgfVxyXG4gIH07XHJcbiAgY29uc3Qgb3BlbkNhc2UgPSAoKSA9PiB7XHJcbiAgICBzZXRMaW5lKGdlbmVyYXRlTGluZSgpKTtcclxuICAgIHNldE9wZW5pbmdJblByb2dyZXNzKHRydWUpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHNldFJlY2VpdmVkSXRlbU1vZGFsVmlzaWJsZSh0cnVlKTtcclxuICAgIH0sIGNvbnRleHQuY2FzZU9wZW5pbmdUaW1lICsgMTAwKTtcclxuICB9O1xyXG4gIGNvbnN0IG9uUmVjZWl2ZWRJdGVtQ29uZmlybWF0aW9uID0gKCkgPT4ge1xyXG4gICAgcm91dGVyLnB1c2goXCIvXCIpO1xyXG4gIH07XHJcbiAgY29uc3Qgb25UcnlBZ2FpbkJ0bkNsaWNrID0gKCkgPT4ge1xyXG4gICAgc2V0UmVjZWl2ZWRJdGVtTW9kYWxWaXNpYmxlKGZhbHNlKTtcclxuICAgIHNldE9wZW5pbmdJblByb2dyZXNzKGZhbHNlKTtcclxuICAgIHNldExpbmUoZ2VuZXJhdGVMaW5lKCkpO1xyXG4gICAgc2V0T3BlbmluZ0luUHJvZ3Jlc3ModHJ1ZSk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgc2V0UmVjZWl2ZWRJdGVtTW9kYWxWaXNpYmxlKHRydWUpO1xyXG4gICAgfSwgY29udGV4dC5jYXNlT3BlbmluZ1RpbWUgKyAxMDApO1xyXG4gIH07XHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdjYXNlLW9wZW5pbmctc2VjJz5cclxuICAgICAgICB7b3BlbmluZ0luUHJvZ3Jlc3MgJiYgPENhc2VPcGVuaW5nQXVkaW8gLz59XHJcbiAgICAgICAge3JlY2VpdmVkSXRlbU1vZGFsVmlzaWJsZSAmJiAoXHJcbiAgICAgICAgICA8UmVjZWl2ZWRJdGVtTW9kYWxcclxuICAgICAgICAgICAgdGl0bGU9e3JlY2VpdmVkSXRlbS50aXRsZX1cclxuICAgICAgICAgICAgaXNTdGF0cmFrPXtyZWNlaXZlZEl0ZW0uaXNTdGF0cmFrfVxyXG4gICAgICAgICAgICB0eXBlPXtyZWNlaXZlZEl0ZW0udHlwZX1cclxuICAgICAgICAgICAgaW1hZ2U9e3JlY2VpdmVkSXRlbS5pbWFnZX1cclxuICAgICAgICAgICAgb25UcnlBZ2FpbkJ0bkNsaWNrPXsoKSA9PiBvblRyeUFnYWluQnRuQ2xpY2soKX1cclxuICAgICAgICAgICAgb25TdWJtaXQ9eygpID0+IG9uUmVjZWl2ZWRJdGVtQ29uZmlybWF0aW9uKCl9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICl9XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdoZWFkLXdyYXAnPlxyXG4gICAgICAgICAgeyFvcGVuaW5nSW5Qcm9ncmVzcyAmJiAoXHJcbiAgICAgICAgICAgIDxDYXNlT3BlbmluZ0NvbmZpcm1hdGlvblxyXG4gICAgICAgICAgICAgIGltYWdlPXtwcm9wcy5jYXNlSW1hZ2V9XHJcbiAgICAgICAgICAgICAgdGl0bGU9e3Byb3BzLmNhc2VUaXRsZX1cclxuICAgICAgICAgICAgICBvblN1Ym1pdD17KCkgPT4gb3BlbkNhc2UoKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgICB7b3BlbmluZ0luUHJvZ3Jlc3MgJiYgKFxyXG4gICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjYXNlLW9wZW5lci1iZyc+XHJcbiAgICAgICAgICAgICAgICA8aHIgY2xhc3NOYW1lPSdtaWRkbGUtbGluZScgLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjYXNlLW9wZW5lcic+e2xpbmV9PC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICB7b3BlbmluZ0luUHJvZ3Jlc3MgJiYgPFVubG9ja2luZ0NvbnRhaW5lck5vdGlmaWNhdGlvbiAvPn1cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICA8c3R5bGUganN4PlxyXG4gICAgICAgIHtgXHJcbiAgICAgICAgICAuY2FzZS1vcGVuaW5nLXNlYyB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDUwJTtcclxuICAgICAgICAgICAgcGFkZGluZy10b3A6IDJyZW07XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMxMjFiMjQ7XHJcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAwcHggMTFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjc1KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAuY2FzZS1vcGVuaW5nLXNlYyAuaGVhZC13cmFwIHtcclxuICAgICAgICAgICAgd2lkdGg6IDEwMSU7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMC41JSk7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMxMDE2MWI7XHJcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAwcHggMTFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjc1KTtcclxuICAgICAgICAgICAgaGVpZ2h0OiA1NCU7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC5jYXNlLW9wZW5pbmctc2VjIC5oZWFkLXdyYXAgLmNhc2Utb3BlbmVyLWJnIHtcclxuICAgICAgICAgICAgd2lkdGg6IDQwMHB4O1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBibGFjaztcclxuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAxNnB4IDJweDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAuY2FzZS1vcGVuaW5nLXNlYyAuaGVhZC13cmFwIC5jYXNlLW9wZW5lci1iZyAuY2FzZS1vcGVuZXIge1xyXG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgaGVpZ2h0OiAxMDJweDtcclxuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC5taWRkbGUtbGluZSB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM2MDUzMzc7XHJcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICBsZWZ0OiA1MCU7XHJcbiAgICAgICAgICAgIHdpZHRoOiAzcHg7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcclxuICAgICAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgICAgICBtYXJnaW46IDA7XHJcbiAgICAgICAgICAgIHotaW5kZXg6IDE7XHJcbiAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICBgfVxyXG4gICAgICA8L3N0eWxlPlxyXG4gICAgPC8+XHJcbiAgKTtcclxufTtcclxuIl19 */\\n/*@ sourceURL=D:\\\\\\\\Projects\\\\\\\\react-ssr\\\\\\\\react-ssr\\\\\\\\Components\\\\\\\\CaseOpeningSec\\\\\\\\CaseOpeningSec.jsx */\"));\n};","map":{"version":3,"sources":["D:/Projects/react-ssr/react-ssr/Components/CaseOpeningSec/CaseOpeningSec.jsx"],"names":["React","useEffect","useState","useContext","UnlockingContainerNotification","ItemLine","ItemChance","ItemStatrakChance","CaseOpeningConfirmation","ReceivedItemModal","useRouter","getRandomInt","containerType","itemType","CaseOpeningAudio","SettingsContext","act","CaseOpeningSec","props","context","line","setLine","openingInProgress","setOpeningInProgress","receivedItemModalVisible","setReceivedItemModalVisible","receivedItem","setReceivedItem","router","generateItem","actItem","selectRandomItem","getRandom","getRandomSouvenir","addToLocalStorage","value","curValue","localStorage","getItem","Array","of","JSON","parse","console","log","valToStore","stringify","setItem","generateLine","elements","index","push","item","ran","Math","random","items","some","e","type","GREY","LIGHTBLUE","BLUE","PURPLE","PINK","RED","GOLD","getRandomStatrak","isStatrak","isSouvenier","specialItems","length","allGroupItems","filter","val","openCase","setTimeout","caseOpeningTime","onReceivedItemConfirmation","onTryAgainBtnClick","title","image","caseImage","caseTitle"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { UnlockingContainerNotification } from \"../UnlockingContainerNotification/UnlockingContainerNotification\";\r\nimport ItemLine from \"../ItemLine/ItemLine\";\r\nimport { ItemChance, ItemStatrakChance } from \"../../helpers/chance\";\r\nimport { CaseOpeningConfirmation } from \"../CaseOpeningConfirmation/CaseOpeningConfirmation\";\r\nimport ReceivedItemModal from \"../ReceivedItemModal/ReceivedItemModal\";\r\nimport { useRouter } from \"next/router\";\r\nimport { getRandomInt } from \"../../helpers/random\";\r\nimport { containerType } from \"../../helpers/container-type\";\r\nimport { itemType } from \"../../helpers/item-type\";\r\nimport CaseOpeningAudio from \"../CaseOpeningAudio/CaseOpeningAudio\";\r\nimport { SettingsContext } from \"../../contexts/SettingsContext\";\r\nimport { act } from \"react-dom/test-utils\";\r\n\r\nexport const CaseOpeningSec = (props) => {\r\n  const context = useContext(SettingsContext);\r\n  const [line, setLine] = useState(null);\r\n  const [openingInProgress, setOpeningInProgress] = useState(false);\r\n  const [receivedItemModalVisible, setReceivedItemModalVisible] = useState(\r\n    false\r\n  );\r\n  const [receivedItem, setReceivedItem] = useState(null);\r\n  const router = useRouter();\r\n\r\n  // useEffect(() => {\r\n  //   setLine(generateLine());\r\n  // }, []);\r\n\r\n  const generateItem = () => {\r\n    let actItem;\r\n    switch (props.containerType) {\r\n      case containerType[0]:\r\n        actItem = selectRandomItem(getRandom());\r\n        break;\r\n      case containerType[1]:\r\n        actItem = selectRandomItem(getRandomSouvenir());\r\n        break;\r\n      default:\r\n        actItem = selectRandomItem(getRandom());\r\n        break;\r\n    }\r\n    setReceivedItem(actItem);\r\n    return actItem;\r\n  };\r\n\r\n  const addToLocalStorage = (value) => {\r\n    //console.log(Array.of(JSON.parse(localStorage.getItem(\"receivedItems\"))));\r\n    const curValue =\r\n      localStorage.getItem(\"receivedItems\") != null\r\n        ? Array.of(JSON.parse(localStorage.getItem(\"receivedItems\")))\r\n        : [];\r\n    console.log(curValue, [curValue, value]);\r\n    const valToStore = JSON.stringify([curValue, value]);\r\n    localStorage.setItem(\"receivedItems\", valToStore);\r\n  };\r\n\r\n  const generateLine = () => {\r\n    let elements = [];\r\n    let actItem = generateItem();\r\n    addToLocalStorage(actItem);\r\n    for (let index = 0; index < 30; index++) {\r\n      if (index === 25) {\r\n        elements.push(actItem);\r\n      } else {\r\n        let item;\r\n        switch (props.containerType) {\r\n          case containerType[0]:\r\n            item = selectRandomItem(getRandom());\r\n            break;\r\n          case containerType[1]:\r\n            item = selectRandomItem(getRandomSouvenir());\r\n            break;\r\n          default:\r\n            item = selectRandomItem(getRandom());\r\n            break;\r\n        }\r\n        elements.push(item);\r\n      }\r\n    }\r\n    return <ItemLine items={elements} />;\r\n  };\r\n\r\n  const getRandomSouvenir = () => {\r\n    const ran = Math.random();\r\n    if (\r\n      props.items.some((e) => e.type == itemType.GREY) &&\r\n      ran < ItemChance.GREY\r\n    )\r\n      return itemType.GREY;\r\n    else if (\r\n      props.items.some((e) => e.type == itemType.LIGHTBLUE) &&\r\n      ran < ItemChance.LIGHTBLUE\r\n    )\r\n      return itemType.LIGHTBLUE;\r\n    else if (\r\n      props.items.some((e) => e.type == itemType.BLUE) &&\r\n      ran < ItemChance.BLUE\r\n    )\r\n      return itemType.BLUE;\r\n    else if (\r\n      props.items.some((e) => e.type == itemType.PURPLE) &&\r\n      ran < ItemChance.PURPLE\r\n    )\r\n      return itemType.PURPLE;\r\n    else if (\r\n      props.items.some((e) => e.type == itemType.PINK) &&\r\n      ran < ItemChance.PINK\r\n    )\r\n      return itemType.PINK;\r\n    else if (\r\n      props.items.some((e) => e.type == itemType.RED) &&\r\n      ran < ItemChance.RED\r\n    )\r\n      return itemType.RED;\r\n    else if (\r\n      props.items.some((e) => e.type == itemType.GOLD) &&\r\n      ran < ItemChance.GOLD\r\n    )\r\n      return itemType.GOLD;\r\n  };\r\n\r\n  const getRandom = () => {\r\n    const ran = Math.random();\r\n    if (ran < ItemChance.BLUE) return itemType.BLUE;\r\n    else if (ran < ItemChance.PURPLE) return itemType.PURPLE;\r\n    else if (ran < ItemChance.PINK) return itemType.PINK;\r\n    else if (ran < ItemChance.RED) return itemType.RED;\r\n    else if (ran < ItemChance.GOLD) return itemType.GOLD;\r\n  };\r\n\r\n  const getRandomStatrak = (type) => {\r\n    const ran = Math.random();\r\n    if (ran < ItemStatrakChance.BLUE && type == itemType.BLUE) return true;\r\n    else if (ran < ItemStatrakChance.PURPLE && type == itemType.PURPLE)\r\n      return true;\r\n    else if (ran < ItemStatrakChance.PINK && type == itemType.PINK) return true;\r\n    else if (ran < ItemStatrakChance.RED && type == itemType.RED) return true;\r\n    else if (ran < ItemStatrakChance.GOLD && type == itemType.GOLD) return true;\r\n  };\r\n\r\n  const selectRandomItem = (type) => {\r\n    let isStatrak;\r\n    if (!props.isSouvenier) {\r\n      isStatrak = getRandomStatrak(type);\r\n    } else {\r\n      isStatrak = false;\r\n    }\r\n    if (type === itemType.GOLD) {\r\n      const ran = getRandomInt(0, props.specialItems.length);\r\n      return {\r\n        ...props.specialItems[ran],\r\n        isStatrak,\r\n      };\r\n    } else {\r\n      const allGroupItems = [...props.items.filter((val) => val.type === type)];\r\n      const ran = getRandomInt(0, allGroupItems.length);\r\n      return { ...allGroupItems[ran], isStatrak };\r\n    }\r\n  };\r\n  const openCase = () => {\r\n    setLine(generateLine());\r\n    setOpeningInProgress(true);\r\n    setTimeout(() => {\r\n      setReceivedItemModalVisible(true);\r\n    }, context.caseOpeningTime + 100);\r\n  };\r\n  const onReceivedItemConfirmation = () => {\r\n    router.push(\"/\");\r\n  };\r\n  const onTryAgainBtnClick = () => {\r\n    setReceivedItemModalVisible(false);\r\n    setOpeningInProgress(false);\r\n    setLine(generateLine());\r\n    setOpeningInProgress(true);\r\n    setTimeout(() => {\r\n      setReceivedItemModalVisible(true);\r\n    }, context.caseOpeningTime + 100);\r\n  };\r\n  return (\r\n    <>\r\n      <div className='case-opening-sec'>\r\n        {openingInProgress && <CaseOpeningAudio />}\r\n        {receivedItemModalVisible && (\r\n          <ReceivedItemModal\r\n            title={receivedItem.title}\r\n            isStatrak={receivedItem.isStatrak}\r\n            type={receivedItem.type}\r\n            image={receivedItem.image}\r\n            onTryAgainBtnClick={() => onTryAgainBtnClick()}\r\n            onSubmit={() => onReceivedItemConfirmation()}\r\n          />\r\n        )}\r\n\r\n        <div className='head-wrap'>\r\n          {!openingInProgress && (\r\n            <CaseOpeningConfirmation\r\n              image={props.caseImage}\r\n              title={props.caseTitle}\r\n              onSubmit={() => openCase()}\r\n            />\r\n          )}\r\n          {openingInProgress && (\r\n            <>\r\n              <div className='case-opener-bg'>\r\n                <hr className='middle-line' />\r\n                <div className='case-opener'>{line}</div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n        {openingInProgress && <UnlockingContainerNotification />}\r\n      </div>\r\n\r\n      <style jsx>\r\n        {`\r\n          .case-opening-sec {\r\n            width: 100%;\r\n            height: 50%;\r\n            padding-top: 2rem;\r\n            background: #121b24;\r\n            box-shadow: 0px 0px 11px 1px rgba(0, 0, 0, 0.75);\r\n          }\r\n\r\n          .case-opening-sec .head-wrap {\r\n            width: 101%;\r\n            transform: translateX(-0.5%);\r\n            background: #10161b;\r\n            box-shadow: 0px 0px 11px 1px rgba(0, 0, 0, 0.75);\r\n            height: 54%;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n          }\r\n\r\n          .case-opening-sec .head-wrap .case-opener-bg {\r\n            width: 400px;\r\n            background: black;\r\n            position: relative;\r\n            padding: 16px 2px;\r\n          }\r\n\r\n          .case-opening-sec .head-wrap .case-opener-bg .case-opener {\r\n            width: 100%;\r\n            height: 102px;\r\n            overflow: hidden;\r\n            position: relative;\r\n          }\r\n\r\n          .middle-line {\r\n            background: #605337;\r\n            height: 100%;\r\n            position: absolute;\r\n            left: 50%;\r\n            width: 3px;\r\n            transform: translateX(-50%);\r\n            top: 0;\r\n            margin: 0;\r\n            z-index: 1;\r\n            border: none;\r\n          }\r\n        `}\r\n      </style>\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}